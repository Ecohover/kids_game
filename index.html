<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‹•ç‰©çµäººéŠæˆ² - å­¸ç¿’å‹•ç‰©åˆ†é¡</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: 
                radial-gradient(circle at 20% 80%, rgba(34, 139, 34, 0.8) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(34, 139, 34, 0.6) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(34, 139, 34, 0.7) 0%, transparent 30%),
                linear-gradient(to bottom, #87CEEB 0%, #87CEEB 40%, #4682B4 60%, #191970 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><polygon points="4,4 28,16 16,18 14,30" fill="%23ff6b6b" stroke="%23fff" stroke-width="2"/><circle cx="6" cy="6" r="2" fill="%23fdcb6e"/></svg>'), auto;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><text x="10" y="40" font-size="30">ğŸŒ²</text></svg>') 10% 70%,
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><text x="10" y="40" font-size="25">ğŸŒ³</text></svg>') 25% 75%,
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><text x="10" y="40" font-size="30">ğŸŒ²</text></svg>') 5% 80%,
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><text x="10" y="40" font-size="25">ğŸŒ¿</text></svg>') 15% 85%,
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><text x="10" y="40" font-size="30">ğŸŒ²</text></svg>') 80% 75%,
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><text x="10" y="40" font-size="25">ğŸŒ³</text></svg>') 90% 80%,
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><text x="10" y="40" font-size="20">ğŸ </text></svg>') 70% 20%,
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><text x="10" y="40" font-size="25">ğŸŒŠ</text></svg>') 60% 30%,
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><text x="10" y="40" font-size="20">ğŸŸ</text></svg>') 75% 25%,
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><text x="10" y="40" font-size="25">ğŸŒŠ</text></svg>') 80% 35%;
            background-repeat: no-repeat;
            pointer-events: none;
            z-index: -1;
            opacity: 0.6;
        }

        .game-container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            max-width: 1200px;
            width: 100%;
        }

        .left-panel {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }

        /* æ‰‹æ©Ÿç‰ˆéŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 2em;
                margin-bottom: 15px;
            }
            
            .game-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .left-panel {
                width: 100%;
            }
            
            .stats-panel {
                width: 100%;
                max-height: none;
                order: -1; /* çµ±è¨ˆé¢æ¿ç§»åˆ°ä¸Šæ–¹ */
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 5px;
            }
            
            h1 {
                font-size: 1.8em;
                margin-bottom: 10px;
            }
        }

        h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .game-area {
            width: 100%;
            max-width: 600px;
            height: 500px;
            background: 
                /* æµ·æ´‹æ³¢æµªæ•ˆæœ */
                radial-gradient(ellipse at top, rgba(135, 206, 235, 0.3) 0%, transparent 50%),
                radial-gradient(ellipse 120% 80% at 70% 20%, rgba(70, 130, 180, 0.2) 0%, transparent 50%),
                radial-gradient(ellipse 120% 80% at 30% 15%, rgba(70, 130, 180, 0.2) 0%, transparent 50%),
                /* æ£®æ—æ¨¹å½±æ•ˆæœ */
                radial-gradient(ellipse 80% 60% at 20% 85%, rgba(34, 139, 34, 0.4) 0%, transparent 50%),
                radial-gradient(ellipse 100% 70% at 80% 90%, rgba(46, 139, 87, 0.3) 0%, transparent 50%),
                radial-gradient(ellipse 60% 50% at 50% 80%, rgba(34, 139, 34, 0.3) 0%, transparent 50%),
                /* ä¸»è¦æ¼¸å±¤èƒŒæ™¯ */
                linear-gradient(to bottom, 
                    #87CEEB 0%,     /* å¤©ç©ºè— */
                    #4682B4 25%,    /* é‹¼è— */
                    #20B2AA 45%,    /* äº®æµ·ç¶  */
                    #2E8B57 65%,    /* æµ·ç¶  */
                    #228B22 85%,    /* æ£®æ—ç¶  */
                    #006400 100%    /* æ·±ç¶  */
                );
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 3px solid rgba(255,255,255,0.3);
        }

        /* æ‰‹æ©Ÿç‰ˆéŠæˆ²å€åŸŸ */
        @media (max-width: 768px) {
            .game-area {
                height: 400px;
                max-width: 100%;
                margin: 0 auto;
            }
        }

        @media (max-width: 480px) {
            .game-area {
                height: 350px;
                border-radius: 15px;
            }
        }

        .game-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                /* æµ·æ´‹å€åŸŸè£é£¾ */
                radial-gradient(circle 20px at 15% 15%, rgba(255,255,255,0.6) 0%, transparent 70%),
                radial-gradient(circle 15px at 85% 25%, rgba(255,255,255,0.5) 0%, transparent 70%),
                radial-gradient(circle 25px at 50% 10%, rgba(255,255,255,0.4) 0%, transparent 70%),
                /* æ°£æ³¡æ•ˆæœ */
                radial-gradient(circle 8px at 25% 30%, rgba(173,216,230,0.8) 0%, transparent 70%),
                radial-gradient(circle 6px at 75% 35%, rgba(173,216,230,0.7) 0%, transparent 70%),
                radial-gradient(circle 10px at 60% 20%, rgba(173,216,230,0.6) 0%, transparent 70%),
                /* æ£®æ—å€åŸŸè£é£¾ */
                radial-gradient(ellipse 40px 60px at 10% 85%, rgba(0,100,0,0.3) 0%, transparent 70%),
                radial-gradient(ellipse 50px 70px at 90% 80%, rgba(34,139,34,0.3) 0%, transparent 70%),
                radial-gradient(ellipse 35px 50px at 70% 90%, rgba(0,128,0,0.3) 0%, transparent 70%),
                radial-gradient(ellipse 45px 65px at 30% 75%, rgba(46,139,87,0.3) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        .stats-panel {
            width: 300px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            max-height: 600px;
            overflow-y: auto;
        }

        /* æ‰‹æ©Ÿç‰ˆçµ±è¨ˆé¢æ¿ */
        @media (max-width: 768px) {
            .stats-panel {
                width: 100%;
                padding: 15px;
                max-height: 300px;
                border-radius: 15px;
                margin-bottom: 15px;
            }
            
            .stats-title {
                font-size: 1.3em;
                margin-bottom: 12px;
            }
            
            .category-title {
                font-size: 1.1em;
                margin-bottom: 8px;
            }
            
            .stat-item {
                padding: 6px 10px;
                font-size: 0.9em;
            }
            
            .click-item {
                padding: 6px;
                font-size: 0.8em;
            }
            
            .recent-clicks {
                margin-top: 15px;
            }
        }

        @media (max-width: 480px) {
            .stats-panel {
                padding: 12px;
                max-height: 250px;
                border-radius: 12px;
            }
            
            .stats-title {
                font-size: 1.2em;
                margin-bottom: 10px;
            }
            
            .category-title {
                font-size: 1em;
                margin-bottom: 6px;
            }
            
            .stat-item {
                padding: 5px 8px;
                font-size: 0.85em;
            }
            
            .click-item {
                padding: 5px;
                font-size: 0.75em;
            }
        }

        .stats-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #2d3436;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid #00b894;
            padding-bottom: 10px;
        }

        .stat-category {
            margin-bottom: 20px;
        }

        .category-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            margin: 5px 0;
            background: rgba(116, 185, 255, 0.1);
            border-radius: 10px;
            border-left: 4px solid;
        }

        .carnivore-stat { border-left-color: #ff6b6b; }
        .herbivore-stat { border-left-color: #00b894; }
        .omnivore-stat { border-left-color: #fdcb6e; }

        .stat-count {
            font-weight: bold;
            font-size: 1.1em;
        }

        .recent-clicks {
            margin-top: 20px;
        }

        .click-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            margin: 5px 0;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            font-size: 0.9em;
        }

        .click-result {
            font-weight: bold;
        }

        .correct { color: #00b894; }
        .incorrect { color: #d63031; }

        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            gap: 20px;
        }

        /* æ‰‹æ©Ÿç‰ˆéŠæˆ²è³‡è¨Š */
        @media (max-width: 768px) {
            .game-info {
                flex-wrap: wrap;
                gap: 10px;
                margin: 15px 0;
                justify-content: center;
            }
            
            .score, .level-info {
                font-size: 0.9em;
            }
            
            .lives {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .game-info {
                gap: 8px;
                margin: 10px 0;
            }
            
            .score, .level-info {
                font-size: 0.8em;
            }
            
            .heart {
                font-size: 1.2em;
            }
        }

        .lives {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .heart {
            font-size: 1.5em;
            transition: all 0.3s ease;
        }

        .heart.lost {
            opacity: 0.3;
            filter: grayscale(100%);
        }

        .level-info {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 10px 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .game-over-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            max-width: 400px;
        }

        .game-over h2 {
            color: #d63031;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .final-stats {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .animal {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            position: absolute;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><polygon points="4,4 28,16 16,18 14,30" fill="%23ff6b6b" stroke="%23fff" stroke-width="2"/><circle cx="6" cy="6" r="2" fill="%23fdcb6e"/></svg>'), auto;
            transition: transform 0.1s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            border: 3px solid #fff;
            z-index: 10;
            /* è§¸æ§å„ªåŒ– */
            user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* æ‰‹æ©Ÿç‰ˆå‹•ç‰©å¤§å°èª¿æ•´ */
        @media (max-width: 768px) {
            .animal {
                width: 70px;
                height: 70px;
                font-size: 2.2em;
                cursor: pointer; /* æ‰‹æ©Ÿç‰ˆä½¿ç”¨æ¨™æº–æŒ‡æ¨™ */
            }
        }

        @media (max-width: 480px) {
            .animal {
                width: 60px;
                height: 60px;
                font-size: 2em;
            }
        }

        .animal:hover {
            transform: scale(1.1);
        }

        .animal:active {
            transform: scale(0.9);
        }

        .score {
            color: white;
            font-size: 2em;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .controls {
            margin: 20px 0;
        }

        .rules {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            max-width: 600px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        /* æ‰‹æ©Ÿç‰ˆè¦å‰‡èªªæ˜ */
        @media (max-width: 768px) {
            .rules {
                margin: 15px 0;
                padding: 15px;
                max-width: 100%;
            }
            
            .rule-item {
                font-size: 0.9em;
                margin: 8px 0;
            }
            
            .rule-ball {
                width: 25px;
                height: 25px;
                margin-right: 10px;
            }
        }

        @media (max-width: 480px) {
            .rules {
                margin: 10px 0;
                padding: 12px;
                border-radius: 12px;
            }
            
            .rule-item {
                font-size: 0.8em;
            }
        }

        .rules.collapsed {
            padding: 10px 20px;
        }

        .rules.collapsed .rule-content {
            display: none;
        }

        .toggle-rules {
            background: none;
            border: none;
            font-size: 1.1em;
            cursor: pointer;
            color: #2d3436;
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            justify-content: center;
        }

        .toggle-rules:hover {
            color: #00b894;
        }

        .rule-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            font-size: 1.2em;
        }

        .rule-ball {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 15px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }

        .good-ball {
            border: 3px solid #00b894;
        }

        .bad-ball {
            border: 3px solid #d63031;
        }

        button {
            background: #00b894;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 25px;
            cursor: pointer;
            margin: 0 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
            /* è§¸æ§å„ªåŒ– */
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        /* æ‰‹æ©Ÿç‰ˆæŒ‰éˆ• */
        @media (max-width: 768px) {
            button {
                padding: 12px 25px;
                font-size: 1.1em;
                margin: 5px;
                min-height: 44px; /* iOS å»ºè­°çš„æœ€å°è§¸æ§å€åŸŸ */
            }
            
            .controls {
                margin: 15px 0;
            }
        }

        @media (max-width: 480px) {
            button {
                padding: 10px 20px;
                font-size: 1em;
                margin: 3px;
                border-radius: 20px;
            }
            
            .controls {
                margin: 10px 0;
            }
        }

        button:hover {
            background: #00a085;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            color: #fdcb6e;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            z-index: 1000;
            animation: bounce 0.5s;
            display: none;
        }

        @keyframes bounce {
            0%, 20%, 60%, 100% { transform: translate(-50%, -50%) translateY(0); }
            40% { transform: translate(-50%, -50%) translateY(-30px); }
            80% { transform: translate(-50%, -50%) translateY(-15px); }
        }
    </style>
</head>
<body>
    <h1>ğŸ¹ å‹•ç‰©çµäººéŠæˆ² ğŸ¦</h1>
    
    <div class="game-container">
        <div class="left-panel">
            <div class="rules" id="rulesPanel">
                <button class="toggle-rules" onclick="toggleRules()">
                    <span id="rulesTitle">ğŸ¯ éŠæˆ²è¦å‰‡ï¼šåªèƒ½çµæ•è‚‰é£Ÿå‹•ç‰©ï¼</span>
                    <span id="toggleIcon">ğŸ“–</span>
                </button>
                <div class="rule-content" id="ruleContent">
                    <div class="rule-item">
                        <div class="rule-ball good-ball" style="background: #ff6b6b; font-size: 1.5em; display: flex; align-items: center; justify-content: center;">ğŸ¦</div>
                        <span>è‚‰é£Ÿå‹•ç‰© = +20åˆ† âœ… (ç…å­ã€è€è™ã€é¯Šé­š)</span>
                    </div>
                    <div class="rule-item">
                        <div class="rule-ball bad-ball" style="background: #00b894; font-size: 1.5em; display: flex; align-items: center; justify-content: center;">ğŸ„</div>
                        <span>è‰é£Ÿå‹•ç‰© = -10åˆ† âŒ ä¸è¦çµæ•ï¼(ç‰›ã€ç¾Šã€å…”å­)</span>
                    </div>
                    <div class="rule-item">
                        <div class="rule-ball bad-ball" style="background: #fdcb6e; font-size: 1.5em; display: flex; align-items: center; justify-content: center;">ğŸ»</div>
                        <span>é›œé£Ÿå‹•ç‰© = -15åˆ† âš ï¸ ä¹Ÿä¸è¦çµæ•ï¼(ç†Šã€è±¬ã€çŒ´å­)</span>
                    </div>
                </div>
            </div>
            
            <div class="game-info">
                <div class="score">åˆ†æ•¸: <span id="score">0</span></div>
                <div class="level-info">
                    <div>ç­‰ç´š: <span id="level">1</span></div>
                </div>
                <div class="lives">
                    <span>ç”Ÿå‘½: </span>
                    <div id="heartsContainer"></div>
                </div>
            </div>
            
            <div class="game-area" id="gameArea"></div>
            <div class="controls">
                <button onclick="startGame()">é–‹å§‹éŠæˆ²</button>
                <button onclick="resetGame()">é‡æ–°é–‹å§‹</button>
            </div>
        </div>
        
        <div class="stats-panel">
            <div class="stats-title">ğŸ“Š éŠæˆ²çµ±è¨ˆ</div>
            
            <div class="stat-category">
                <div class="category-title">
                    ğŸ¯ æ­£ç¢ºçµæ• (è‚‰é£Ÿå‹•ç‰©)
                </div>
                <div id="carnivoreStats"></div>
            </div>
            
            <div class="stat-category">
                <div class="category-title">
                    âŒ èª¤çµè‰é£Ÿå‹•ç‰©
                </div>
                <div id="herbivoreStats"></div>
            </div>
            
            <div class="stat-category">
                <div class="category-title">
                    âš ï¸ èª¤çµé›œé£Ÿå‹•ç‰©
                </div>
                <div id="omnivoreStats"></div>
            </div>
            
            <div class="recent-clicks">
                <div class="category-title">
                    ğŸ“ æœ€è¿‘é»æ“Šè¨˜éŒ„
                </div>
                <div id="recentClicks"></div>
            </div>
        </div>
    </div>
    
    <div class="game-over" id="gameOver">
        <div class="game-over-content">
            <h2>éŠæˆ²çµæŸï¼ ğŸ’”</h2>
            <p>ä½ çš„ç”Ÿå‘½ç”¨å®Œäº†...</p>
            <div class="final-stats">
                <div>æœ€çµ‚åˆ†æ•¸: <span id="finalScore">0</span></div>
                <div>é”åˆ°ç­‰ç´š: <span id="finalLevel">1</span></div>
                <div>ç¸½çµæ•æ•¸: <span id="totalHunts">0</span></div>
            </div>
            <button onclick="restartGame()" style="background: #00b894; color: white; padding: 15px 30px; border: none; border-radius: 25px; font-size: 1.2em; cursor: pointer;">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>
    
    <div class="celebration" id="celebration">å¤ªæ£’äº†! ğŸ‰</div>

    <script>
        let score = 0;
        let gameActive = false;
        let ballCreationInterval;
        let stats = {
            carnivore: {},
            herbivore: {},
            omnivore: {}
        };
        let recentClicks = [];
        let level = 1;
        let lives = 10;
        let missedAnimals = 0;
        let totalHunts = 0;
        let currentSpeed = 3000; // åˆå§‹é€Ÿåº¦3ç§’
        
        const allAnimalTypes = {
            level1: {
                carnivore: [
                    { emoji: 'ğŸ¦', color: '#ff6b6b', points: 20, name: 'ç…å­', type: 'è‚‰é£Ÿ' },
                    { emoji: 'ğŸ…', color: '#ff7675', points: 20, name: 'è€è™', type: 'è‚‰é£Ÿ' },
                    { emoji: 'ğŸ¦ˆ', color: '#74b9ff', points: 20, name: 'é¯Šé­š', type: 'è‚‰é£Ÿ' },
                    { emoji: 'ğŸº', color: '#636e72', points: 20, name: 'ç‹¼', type: 'è‚‰é£Ÿ' }
                ],
                herbivore: [
                    { emoji: 'ğŸ„', color: '#00b894', points: -10, name: 'ç‰›', type: 'è‰é£Ÿ' },
                    { emoji: 'ğŸ‘', color: '#55a3ff', points: -10, name: 'ç¾Š', type: 'è‰é£Ÿ' },
                    { emoji: 'ğŸ°', color: '#fd79a8', points: -10, name: 'å…”å­', type: 'è‰é£Ÿ' },
                    { emoji: 'ğŸ¦Œ', color: '#a29bfe', points: -10, name: 'é¹¿', type: 'è‰é£Ÿ' }
                ],
                omnivore: [
                    { emoji: 'ğŸ»', color: '#fdcb6e', points: -15, name: 'ç†Š', type: 'é›œé£Ÿ' },
                    { emoji: 'ğŸ·', color: '#e17055', points: -15, name: 'è±¬', type: 'é›œé£Ÿ' },
                    { emoji: 'ğŸµ', color: '#00cec9', points: -15, name: 'çŒ´å­', type: 'é›œé£Ÿ' }
                ]
            },
            level5: {
                carnivore: [
                    { emoji: 'ğŸ†', color: '#ff6348', points: 25, name: 'è±¹', type: 'è‚‰é£Ÿ' },
                    { emoji: 'ğŸ¦…', color: '#8b4513', points: 25, name: 'è€é·¹', type: 'è‚‰é£Ÿ' },
                    { emoji: 'ğŸŠ', color: '#228b22', points: 25, name: 'é±·é­š', type: 'è‚‰é£Ÿ' }
                ],
                herbivore: [
                    { emoji: 'ğŸ˜', color: '#708090', points: -12, name: 'å¤§è±¡', type: 'è‰é£Ÿ' },
                    { emoji: 'ğŸ¦', color: '#696969', points: -12, name: 'çŠ€ç‰›', type: 'è‰é£Ÿ' },
                    { emoji: 'ğŸ¦’', color: '#daa520', points: -12, name: 'é•·é ¸é¹¿', type: 'è‰é£Ÿ' }
                ],
                omnivore: [
                    { emoji: 'ğŸ¼', color: '#000000', points: -18, name: 'ç†Šè²“', type: 'é›œé£Ÿ' },
                    { emoji: 'ğŸ¦', color: '#8b7355', points: -18, name: 'æµ£ç†Š', type: 'é›œé£Ÿ' }
                ]
            },
            level10: {
                carnivore: [
                    { emoji: 'ğŸ¦‘', color: '#4b0082', points: 30, name: 'ç« é­š', type: 'è‚‰é£Ÿ' },
                    { emoji: 'ğŸ™', color: '#ff1493', points: 30, name: 'çƒè³Š', type: 'è‚‰é£Ÿ' },
                    { emoji: 'ğŸ¦', color: '#ff4500', points: 30, name: 'é¾è¦', type: 'è‚‰é£Ÿ' }
                ],
                herbivore: [
                    { emoji: 'ğŸ‹', color: '#1e90ff', points: -15, name: 'é¯¨é­š', type: 'è‰é£Ÿ' },
                    { emoji: 'ğŸ¢', color: '#006400', points: -15, name: 'æµ·é¾œ', type: 'è‰é£Ÿ' },
                    { emoji: 'ğŸ¦­', color: '#2f4f4f', points: -15, name: 'æµ·è±¹', type: 'è‰é£Ÿ' }
                ],
                omnivore: [
                    { emoji: 'ğŸ§', color: '#000080', points: -20, name: 'ä¼éµ', type: 'é›œé£Ÿ' },
                    { emoji: 'ğŸ¦†', color: '#008b8b', points: -20, name: 'é´¨å­', type: 'é›œé£Ÿ' }
                ]
            },
            level15: {
                carnivore: [
                    { emoji: 'ğŸ¦–', color: '#8b0000', points: 35, name: 'æš´é¾', type: 'è‚‰é£Ÿ' },
                    { emoji: 'ğŸ‰', color: '#ff6347', points: 35, name: 'é¾', type: 'è‚‰é£Ÿ' },
                    { emoji: 'ğŸ¦‡', color: '#2f2f2f', points: 35, name: 'è™è ', type: 'è‚‰é£Ÿ' }
                ],
                herbivore: [
                    { emoji: 'ğŸ¦•', color: '#90ee90', points: -18, name: 'é•·é ¸é¾', type: 'è‰é£Ÿ' },
                    { emoji: 'ğŸ¨', color: '#808080', points: -18, name: 'ç„¡å°¾ç†Š', type: 'è‰é£Ÿ' },
                    { emoji: 'ğŸ¦˜', color: '#cd853f', points: -18, name: 'è¢‹é¼ ', type: 'è‰é£Ÿ' }
                ],
                omnivore: [
                    { emoji: 'ğŸº', color: '#4682b4', points: -22, name: 'åŒ—æ¥µç‹¼', type: 'é›œé£Ÿ' },
                    { emoji: 'ğŸ¦Š', color: '#ff8c00', points: -22, name: 'ç‹ç‹¸', type: 'é›œé£Ÿ' }
                ]
            }
        };
        
        let currentAnimalTypes = {};
        
        function createAnimal() {
            if (!gameActive) return;
            
            const gameArea = document.getElementById('gameArea');
            const animal = document.createElement('div');
            animal.className = 'animal';
            
            // é¸æ“‡å‹•ç‰©é¡å‹ (60%è‚‰é£Ÿ, 25%è‰é£Ÿ, 15%é›œé£Ÿ)
            let animalType;
            const rand = Math.random();
            if (rand < 0.6) {
                animalType = currentAnimalTypes.carnivore[Math.floor(Math.random() * currentAnimalTypes.carnivore.length)];
            } else if (rand < 0.85) {
                animalType = currentAnimalTypes.herbivore[Math.floor(Math.random() * currentAnimalTypes.herbivore.length)];
            } else {
                animalType = currentAnimalTypes.omnivore[Math.floor(Math.random() * currentAnimalTypes.omnivore.length)];
            }
            
            animal.style.backgroundColor = animalType.color;
            animal.textContent = animalType.emoji;
            animal.animalType = animalType;
            
            // éš¨æ©Ÿä½ç½® (ç¢ºä¿å‹•ç‰©å®Œå…¨åœ¨éŠæˆ²å€åŸŸå…§ï¼Œæ ¹æ“šå‹•ç‰©å¤§å°èª¿æ•´)
            const animalSize = window.innerWidth <= 480 ? 60 : (window.innerWidth <= 768 ? 70 : 80);
            const maxX = gameArea.offsetWidth - animalSize;
            const maxY = gameArea.offsetHeight - animalSize;
            animal.style.left = Math.random() * maxX + 'px';
            animal.style.top = Math.random() * maxY + 'px';
            
            // é»æ“Šäº‹ä»¶
            animal.onclick = function() {
                score += animalType.points;
                document.getElementById('score').textContent = score;
                totalHunts++;
                
                // æ›´æ–°çµ±è¨ˆ
                updateStats(animalType);
                
                // æª¢æŸ¥å‡ç´š
                checkLevelUp();
                
                // æ ¹æ“šå‹•ç‰©é¡å‹é¡¯ç¤ºä¸åŒåé¥‹
                if (animalType.points > 0) {
                    showCelebration(`å¤ªæ£’äº†! çµåˆ°${animalType.name}! +${animalType.points} ğŸ¯`, '#00b894');
                } else {
                    // æŒ‰éŒ¯äº†è‰é£Ÿ/é›œé£Ÿå‹•ç‰©ï¼Œè¦æ‰£è¡€
                    loseLife();
                    showCelebration(`å“å‘€! ${animalType.name}æ˜¯${animalType.type}å‹•ç‰©! ${animalType.points} ğŸ’”`, '#d63031');
                }
                
                // ç§»é™¤å‹•ç‰©
                animal.remove();
            };
            
            gameArea.appendChild(animal);
            
            // 5ç§’å¾Œè‡ªå‹•ç§»é™¤å‹•ç‰© (çµ¦å°å­©æ›´å¤šæ™‚é–“è§€å¯Ÿ)
            setTimeout(() => {
                if (animal.parentNode) {
                    // åªæœ‰è‚‰é£Ÿå‹•ç‰©æ¶ˆå¤±æ™‚æ‰æ‰£è¡€(å› ç‚ºæ‡‰è©²è¦æŠ“ä½†æ²’æŠ“åˆ°)
                    if (animalType.points > 0) {
                        loseLife();
                        showCelebration(`éŒ¯éäº†${animalType.name}! ğŸ’”`, '#d63031');
                    }
                    animal.remove();
                }
            }, 5000);
        }
        
        function showCelebration(message = 'å¤ªæ£’äº†! ğŸ‰', color = '#fdcb6e') {
            const celebration = document.getElementById('celebration');
            celebration.textContent = message;
            celebration.style.color = color;
            celebration.style.display = 'block';
            setTimeout(() => {
                celebration.style.display = 'none';
            }, 800);
        }
        
        function updateStats(animalType) {
            // æ›´æ–°çµ±è¨ˆæ•¸æ“š
            const category = animalType.type === 'è‚‰é£Ÿ' ? 'carnivore' : 
                           animalType.type === 'è‰é£Ÿ' ? 'herbivore' : 'omnivore';
            
            if (!stats[category][animalType.name]) {
                stats[category][animalType.name] = { emoji: animalType.emoji, count: 0 };
            }
            stats[category][animalType.name].count++;
            
            // æ·»åŠ åˆ°æœ€è¿‘é»æ“Šè¨˜éŒ„
            const isCorrect = animalType.points > 0;
            recentClicks.unshift({
                emoji: animalType.emoji,
                name: animalType.name,
                points: animalType.points,
                isCorrect: isCorrect,
                time: new Date().toLocaleTimeString()
            });
            
            // åªä¿ç•™æœ€è¿‘10æ¬¡é»æ“Š
            if (recentClicks.length > 10) {
                recentClicks = recentClicks.slice(0, 10);
            }
            
            // æ›´æ–°é¡¯ç¤º
            updateStatsDisplay();
        }
        
        function updateStatsDisplay() {
            // æ›´æ–°è‚‰é£Ÿå‹•ç‰©çµ±è¨ˆ
            const carnivoreDiv = document.getElementById('carnivoreStats');
            carnivoreDiv.innerHTML = '';
            for (const [name, data] of Object.entries(stats.carnivore)) {
                carnivoreDiv.innerHTML += `
                    <div class="stat-item carnivore-stat">
                        <span>${data.emoji} ${name}</span>
                        <span class="stat-count">${data.count}</span>
                    </div>
                `;
            }
            
            // æ›´æ–°è‰é£Ÿå‹•ç‰©çµ±è¨ˆ
            const herbivoreDiv = document.getElementById('herbivoreStats');
            herbivoreDiv.innerHTML = '';
            for (const [name, data] of Object.entries(stats.herbivore)) {
                herbivoreDiv.innerHTML += `
                    <div class="stat-item herbivore-stat">
                        <span>${data.emoji} ${name}</span>
                        <span class="stat-count">${data.count}</span>
                    </div>
                `;
            }
            
            // æ›´æ–°é›œé£Ÿå‹•ç‰©çµ±è¨ˆ
            const omnivoreDiv = document.getElementById('omnivoreStats');
            omnivoreDiv.innerHTML = '';
            for (const [name, data] of Object.entries(stats.omnivore)) {
                omnivoreDiv.innerHTML += `
                    <div class="stat-item omnivore-stat">
                        <span>${data.emoji} ${name}</span>
                        <span class="stat-count">${data.count}</span>
                    </div>
                `;
            }
            
            // æ›´æ–°æœ€è¿‘é»æ“Šè¨˜éŒ„
            const recentDiv = document.getElementById('recentClicks');
            recentDiv.innerHTML = '';
            for (const click of recentClicks) {
                const resultClass = click.isCorrect ? 'correct' : 'incorrect';
                const resultText = click.isCorrect ? 'âœ…' : 'âŒ';
                recentDiv.innerHTML += `
                    <div class="click-item">
                        <span>${click.emoji} ${click.name}</span>
                        <span class="click-result ${resultClass}">${resultText} ${click.points > 0 ? '+' : ''}${click.points}</span>
                    </div>
                `;
            }
        }
        
        function toggleRules() {
            const rulesPanel = document.getElementById('rulesPanel');
            const toggleIcon = document.getElementById('toggleIcon');
            
            rulesPanel.classList.toggle('collapsed');
            toggleIcon.textContent = rulesPanel.classList.contains('collapsed') ? 'ğŸ“š' : 'ğŸ“–';
        }
        
        function updateAnimalTypes() {
            // æ ¹æ“šç­‰ç´šåˆä½µå‹•ç‰©ç¨®é¡
            currentAnimalTypes = {
                carnivore: [...allAnimalTypes.level1.carnivore],
                herbivore: [...allAnimalTypes.level1.herbivore],
                omnivore: [...allAnimalTypes.level1.omnivore]
            };
            
            if (level >= 5) {
                currentAnimalTypes.carnivore.push(...allAnimalTypes.level5.carnivore);
                currentAnimalTypes.herbivore.push(...allAnimalTypes.level5.herbivore);
                currentAnimalTypes.omnivore.push(...allAnimalTypes.level5.omnivore);
            }
            
            if (level >= 10) {
                currentAnimalTypes.carnivore.push(...allAnimalTypes.level10.carnivore);
                currentAnimalTypes.herbivore.push(...allAnimalTypes.level10.herbivore);
                currentAnimalTypes.omnivore.push(...allAnimalTypes.level10.omnivore);
            }
            
            if (level >= 15) {
                currentAnimalTypes.carnivore.push(...allAnimalTypes.level15.carnivore);
                currentAnimalTypes.herbivore.push(...allAnimalTypes.level15.herbivore);
                currentAnimalTypes.omnivore.push(...allAnimalTypes.level15.omnivore);
            }
        }
        
        function checkLevelUp() {
            // æ¯100åˆ†å‡ä¸€ç´š
            const newLevel = Math.floor(score / 100) + 1;
            if (newLevel > level) {
                const oldLevel = level;
                level = newLevel;
                document.getElementById('level').textContent = level;
                
                // å‡ç´šå¾Œé€Ÿåº¦è®Šå¿« (æœ€å°é–“éš”1ç§’)
                currentSpeed = Math.max(1000, 3000 - (level - 1) * 200);
                
                // æ›´æ–°å¯ç”¨å‹•ç‰©ç¨®é¡
                updateAnimalTypes();
                
                // é‡æ–°è¨­å®šå‹•ç‰©ç”Ÿæˆé–“éš”
                if (gameActive && ballCreationInterval) {
                    clearInterval(ballCreationInterval);
                    ballCreationInterval = setInterval(createAnimal, currentSpeed);
                }
                
                // æª¢æŸ¥æ˜¯å¦åœ¨è§£é–æ–°å‹•ç‰©çš„ç­‰ç´š
                let newAnimalsMessage = '';
                if (level === 5) newAnimalsMessage = 'è§£é–æ–°å‹•ç‰©ï¼šè±¹ã€è€é·¹ã€é±·é­šç­‰ï¼';
                else if (level === 10) newAnimalsMessage = 'è§£é–æµ·æ´‹å‹•ç‰©ï¼šç« é­šã€çƒè³Šã€é¯¨é­šç­‰ï¼';
                else if (level === 15) newAnimalsMessage = 'è§£é–ç¥ç§˜ç”Ÿç‰©ï¼šæš´é¾ã€é¾ç­‰ï¼';
                
                if (newAnimalsMessage) {
                    showCelebration(`ğŸ‰ å‡ç´šåˆ°ç­‰ç´š ${level}ï¼${newAnimalsMessage}`, '#fdcb6e');
                } else {
                    showCelebration(`ğŸ‰ å‡ç´šåˆ°ç­‰ç´š ${level}ï¼é€Ÿåº¦åŠ å¿«äº†ï¼`, '#fdcb6e');
                }
            }
        }
        
        function initHearts() {
            const heartsContainer = document.getElementById('heartsContainer');
            heartsContainer.innerHTML = '';
            for (let i = 0; i < 10; i++) {
                const heart = document.createElement('span');
                heart.className = 'heart';
                heart.textContent = 'â¤ï¸';
                heart.id = `heart-${i}`;
                heartsContainer.appendChild(heart);
            }
        }
        
        function loseLife() {
            if (lives > 0) {
                lives--;
                const heart = document.getElementById(`heart-${lives}`);
                if (heart) {
                    heart.classList.add('lost');
                }
                
                if (lives <= 0) {
                    gameOver();
                }
            }
        }
        
        function gameOver() {
            gameActive = false;
            
            // åœæ­¢å‰µå»ºæ–°å‹•ç‰©
            if (ballCreationInterval) {
                clearInterval(ballCreationInterval);
            }
            
            // æ¸…é™¤æ‰€æœ‰å‹•ç‰©
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            
            // é¡¯ç¤ºéŠæˆ²çµæŸç•«é¢
            document.getElementById('finalScore').textContent = score;
            document.getElementById('finalLevel').textContent = level;
            document.getElementById('totalHunts').textContent = totalHunts;
            document.getElementById('gameOver').style.display = 'flex';
        }
        
        function restartGame() {
            document.getElementById('gameOver').style.display = 'none';
            resetGame();
            startGame();
        }
        
        function startGame() {
            gameActive = true;
            score = 0;
            level = 1;
            lives = 10;
            totalHunts = 0;
            currentSpeed = 3000;
            
            document.getElementById('score').textContent = score;
            document.getElementById('level').textContent = level;
            
            // åˆå§‹åŒ–å¯ç”¨å‹•ç‰©ç¨®é¡
            updateAnimalTypes();
            
            // åˆå§‹åŒ–æ„›å¿ƒ
            initHearts();
            
            // æ¸…é™¤ç¾æœ‰çš„å‹•ç‰©
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            
            // ä½¿ç”¨ç•¶å‰é€Ÿåº¦å‰µå»ºå‹•ç‰©
            ballCreationInterval = setInterval(createAnimal, currentSpeed);
        }
        
        function resetGame() {
            gameActive = false;
            score = 0;
            level = 1;
            lives = 10;
            totalHunts = 0;
            currentSpeed = 3000;
            
            document.getElementById('score').textContent = score;
            document.getElementById('level').textContent = level;
            
            // é‡ç½®çµ±è¨ˆæ•¸æ“š
            stats = {
                carnivore: {},
                herbivore: {},
                omnivore: {}
            };
            recentClicks = [];
            updateStatsDisplay();
            
            // é‡ç½®æ„›å¿ƒ
            initHearts();
            
            // åœæ­¢å‰µå»ºæ–°å‹•ç‰©
            if (ballCreationInterval) {
                clearInterval(ballCreationInterval);
            }
            
            // æ¸…é™¤æ‰€æœ‰å‹•ç‰©
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
        }
        
        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–ï¼Œä½†ä¸è‡ªå‹•é–‹å§‹éŠæˆ²
        window.onload = function() {
            // åˆå§‹åŒ–å¯ç”¨å‹•ç‰©ç¨®é¡
            updateAnimalTypes();
            // åˆå§‹åŒ–æ„›å¿ƒé¡¯ç¤º
            initHearts();
            // åˆå§‹åŒ–çµ±è¨ˆé¡¯ç¤º
            updateStatsDisplay();
        };
    </script>
</body>
</html>